# Интеграционные тесты

Интеграционные тесты используют реальный test API T-Bank для проверки работы библиотеки с реальным сервером.

## Настройка

Тестовые данные терминала:

- Terminal: `1745608403831DEMO`
- Secret: `94Aq5VO2D%3##lPK`
- API URL: `https://securepay.tinkoff.ru`

**Важно:** Тестовый терминал с приставкой `DEMO` должен отправлять запросы на боевую среду.

## Запуск

```bash
npm run test:integration
```

## Структура тестов

- `payment.test.js` - тесты создания платежей и проверки статуса
- `customers.test.js` - тесты работы с клиентами
- `cards.test.js` - тесты работы с картами
- `sbp.test.js` - тесты СБП методов
- `alternative-payments.test.js` - тесты T-Pay, SberPay, Mir Pay
- `3ds.test.js` - тесты методов 3DS
- `receipts.test.js` - тесты работы с чеками
- `operation-reference.test.js` - тесты получения справок

## Особенности

- Интеграционные тесты могут быть нестабильными из-за внешнего API
- Таймаут увеличен до 60 секунд
- Тесты не останавливаются на первой ошибке (`bail: false`)
- Некоторые тесты могут падать в зависимости от настроек терминала

## Тестовые данные

Используются тестовые данные из `lib/test-data/test-scenarios.js`:

- Тестовые карты
- Сценарии СБП
- Коды ошибок
